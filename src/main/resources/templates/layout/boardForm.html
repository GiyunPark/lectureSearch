<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Register lecture</title>
    <!--        <link rel="stylesheet" th:href="@{/css/base.css}" />-->
    <!--        <link rel="stylesheet" th:href="@{/css/boardForm.min.css}" />-->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,700,900|Roboto+Mono:300,400,500">
    <link rel="stylesheet" th:href="@{/fonts/icomoon/style.css}">

    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/css/jquery-ui.css}">
    <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/css/owl.theme.default.min.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap-datepicker.css}">
    <link rel="stylesheet" th:href="@{/css/mediaelementplayer.css}">
    <link rel="stylesheet" th:href="@{/css/animate.css}">
    <link rel="stylesheet" th:href="@{/fonts/flaticon-2/font/flaticon.css}">
    <link rel="stylesheet" th:href="@{/css/fl-bigmug-line.css}">

    <link rel="stylesheet" th:href="@{/css/aos.css}">

    <link rel="stylesheet" th:href="@{/css/style.css}">

    <style>
        .page-header {
            padding-top: 100px;
        }

        #registerForm {

        }

        .container {
            color: white;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .form-group {
            display: flex;
            /*justify-content: center;*/
        }

        .form-group table {
            /*align-content: center;*/
            margin: auto auto 20px;
        }

        .form-group table tr {
            width: 110px;
        }

        .form-group table td {
            width: 250px;
        }

        html, body {
            height: 100%;
        }

        table tr th {
            padding:13px 0 0 15px;
            width: 150px;
        }

        input {
            width: 100%;
        }

    </style>
</head>
    <body>
        <div class="site-loader"></div>

        <header th:replace="layout/header"></header>

<!--        site-blocks-cover inner-page-cover overlay-->
        <div class="site-blocks-cover inner-page-cover overlay" data-aos="fade"
             data-stellar-background-ratio="0.5" style="background-image: url(images/main01.jpg);">
            <div class="container-out">
                <div class="row align-items-center justify-content-center text-center">
                    <div class="col-md-10">

                        <div class="container">
                            <div id="registerForm">

                                <div class="page-header">
                                    <h1>강의 등록하기</h1>
                                </div>


                                <table class="table">
                                    <form id="content_form" enctype="multipart/form-data" th:action="!${content?.idx} ? @{/contents/save} : @{/contents/update}"
                                          th:method="!${content?.idx} ? post : put">
                                        <div class="form-group">
                                        <!--                <tr>-->
                                        <!--                    <th style="padding:13px 0 0 15px">게시판 선택</th>-->
                                        <!--                    <td>-->
                                        <!--                        <div class="pull-left">-->
                                        <!--                            <select class="form-control input-sm" id="board_type">-->
                                        <!--                                <option>&#45;&#45;분류&#45;&#45;</option>-->
                                        <!--                                <option th:value="notice" th:selected="${content?.boardType?.name() == 'notice'}">공지사항</option>-->
                                        <!--                                <option th:value="free" th:selected="${content?.boardType?.name() == 'free'}">자유게시판</option>-->
                                        <!--                            </select>-->
                                        <!--                        </div>-->
                                        <!--                    </td>-->
                                        <!--                </tr>-->
                                        <input id="board_idx" type="hidden" th:value="${content?.idx}"/>
                                        <input id="board_create_date" type="hidden" th:value="${content?.createdDate}"/>
                                        <input type="hidden" class="col-md-1 form-control input-sm"
                                               readonly="readonly" th:value="${content?.registrationDate}"/>
                                        <tr>
                                            <th>*제목</th>
                                            <td><input name="title" id="content_title" type="text" class="col-md-1 form-control input-sm" th:value="${content?.title}" required/></td>
                                        </tr>
                                        <tr>
                                            <th>*강사</th>
                                            <td><input name="author" id="content_author" type="text" class="col-md-1 form-control input-sm" th:value="${content?.author}" required/></td>
                                        </tr>
                                        <!--                <tr>-->
                                        <!--                    <th style="padding:13px 0 0 15px;">주제</th>-->
                                        <!--                    <td><input id="board_sub_title" type="text" class="col-md-1 form-control input-sm" th:value="${board?.subTitle}"/></td>-->
                                        <!--                </tr>-->
                                        <tr>
                                            <th>이미지 파일</th>
                                            <td>
                                                <input name="files" id="content_images" multiple="multiple" type="file" th:value="${content?.images}"/>
                                            </td>
                                        </tr>
                                        <!--                <tr>-->
                                        <!--                    <th style="padding:13px 0 0 15px;">서브이미지</th>-->
                                        <!--                    <td><input id="board_sub_title" type="text" class="col-md-1 form-control input-sm" th:value="${board?.subTitle}"/></td>-->
                                        <!--                </tr>-->
                                        <tr>
                                            <th>*가격</th>
                                            <td><input name="price" id="content_price" type="text" class="col-md-1 form-control input-sm" th:value="${content?.price}" required/></td>
                                        </tr>
                                        <tr>
                                            <th>*강의시간</th>
                                            <td><input name="runningTime" id="content_running_time" type="text" class="col-md-1 form-control input-sm" th:value="${content?.runningTime}" required/></td>
                                        </tr>
                                        <tr>
                                            <th>*강의제작날짜</th>
                                            <td><input name="createdDate" id="content_createdDate" type="text" class="col-md-1 form-control input-sm"  th:value="${content?.createdDate}" required/></td>
                                        </tr>
                                        <tr>
                                            <th>*내용</th>
                                            <td><textarea name="description" id="content_description" class="col-md-1 form-control input-sm" maxlength="140" rows="7" style="height: 200px;"
                                                          th:text="${content?.description}" required></textarea><span class="help-block"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>
                                                <div th:if="!${content?.idx}" class="pull-left">
                                                    <a href="/main" class="btn btn-default">목록으로</a>
                                                </div>
                                            </th>
                                            <td>
                                                <div class="pull-right">
                                                    <input th:if="!${content?.idx}" type="submit" class="btn btn-primary" th:value="저장"/>
                                                    <button th:if="${content?.idx}" type="submit" class="btn btn-info" id="update">수정</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <input type="hidden" name="writer" th:value="${user.email}"/>
                                        </div>
                                    </form>
                                </table>

                                <div class="pull-left" th:if="${content?.idx}">
                                    <a href="/main" class="btn btn-default">목록으로</a>
                                </div>

                            </div>
                        </div>

                     </div>
                </div>
            </div>
        </div>

        <footer th:replace="layout/footer"></footer>
    </body>
<!--        <script th:if="!${content?.idx}">-->
<!--            function filesToString(){-->
<!--                var nullCheck = $('#content_images').val();-->
<!--                if(!nullCheck) return;-->
<!--                    var fileInput = document.getElementById("content_images");-->
<!--                    var files = fileInput.files;-->
<!--                    var fileNames = files[0].name;-->
<!--                    for (var i = 1; i < files.length; i++) {-->
<!--                        fileNames += "," + files[i].name;-->
<!--                    }-->
<!--                    return fileNames;-->

<!--            }-->
<!--            $('#insert').click(function () {-->
<!--                document.getElementById('image_form').submit();-->
<!--                var jsonData = JSON.stringify({-->
<!--                    title: $('#content_title').val(),-->
<!--                    author: $('#content_author').val(),-->
<!--                    images: filesToString(),-->
<!--                    description: $('#content_description').val(),-->
<!--                    createdDate: $('#content_createdDate').val(),-->
<!--                    runningTime: $('#content_running_time').val(),-->
<!--                });-->
<!--                $.ajax({-->
<!--                    url: "http://localhost:8080/contents/save",-->
<!--                    type: "POST",-->
<!--                    data: jsonData,-->
<!--                    contentType: "application/json",-->
<!--                    headers: {-->
<!--                        "Authorization": "Basic " + btoa("giyun" + ":" + "test")-->
<!--                    },-->
<!--                    dataType: "json",-->
<!--                    success: function () {-->
<!--                        alert('저장 성공!');-->
<!--                        location.href = '/main';-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('저장 실패!');-->
<!--                    }-->
<!--                });-->
<!--            });-->
<!--        </script>-->
<!--        <script th:if="${content?.idx}">-->
<!--            $('#update').click(function () {-->
<!--                var jsonData = JSON.stringify({-->
<!--                    title: $('#board_title').val(),-->
<!--                    subTitle: $('#board_sub_title').val(),-->
<!--                    content: $('#board_content').val(),-->
<!--                    boardType: $('#board_type option:selected').val(),-->
<!--                    createdDate: $('#board_create_date').val()-->
<!--                });-->
<!--                $.ajax({-->
<!--                    url: "http://localhost:8081/api/boards/" + $('#board_idx').val(),-->
<!--                    type: "PUT",-->
<!--                    data: jsonData,-->
<!--                    contentType: "application/json",-->
<!--                    dataType: "json",-->
<!--                    success: function () {-->
<!--                        alert('수정 성공!');-->
<!--                        location.href = '/board/list';-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('수정 실패!');-->
<!--                    }-->
<!--                });-->
<!--            });-->
<!--        </script>-->
<script th:src="@{/js/jquery.min.js}"></script>

<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/jquery-migrate-3.0.1.min.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/mediaelement-and-player.min.js"></script>
<script src="/js/jquery.stellar.min.js"></script>
<script src="/js/jquery.countdown.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/bootstrap-datepicker.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/circleaudioplayer.js"></script>

<script src="/js/main.js"></script>
</html>